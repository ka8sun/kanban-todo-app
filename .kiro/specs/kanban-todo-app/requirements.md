# Requirements Document

## Introduction

カンバンボード方式を採用したToDoタスク管理Webアプリケーションの要件定義書です。本アプリケーションは、ユーザーがタスクを作成・管理し、ドラッグ&ドロップによる直感的な操作でタスクのステータスを視覚的に管理できる環境を提供します。バックエンドにはSupabaseを採用し、リアルタイムなデータ同期と認証機能を活用します。

**ビジネス価値**: タスクの進捗状況を可視化することで、個人またはチームの作業効率を向上させ、プロジェクト管理をより直感的で効率的なものにします。

## Requirements

### Requirement 1: ユーザー認証とアカウント管理
**Objective:** ユーザーとして、安全にアカウントを作成・ログインし、自分専用のタスク管理環境にアクセスしたい。そうすることで、個人のタスクデータを保護しながら、複数デバイスからアクセスできるようにする。

#### Acceptance Criteria

1. WHEN ユーザーが新規登録フォームでメールアドレスとパスワードを入力し送信する THEN カンバンToDoアプリ SHALL Supabase Authを使用してアカウントを作成し、確認メールを送信する
2. WHEN ユーザーが確認メール内のリンクをクリックする THEN カンバンToDoアプリ SHALL アカウントを有効化し、ログイン可能な状態にする
3. WHEN ユーザーがログインフォームで有効な認証情報を入力する THEN カンバンToDoアプリ SHALL ユーザーを認証し、カンバンボード画面にリダイレクトする
4. WHEN ユーザーがログアウトボタンをクリックする THEN カンバンToDoアプリ SHALL セッションを終了し、ログイン画面にリダイレクトする
5. IF ユーザーが未認証の状態でカンバンボード画面にアクセスしようとする THEN カンバンToDoアプリ SHALL ログイン画面にリダイレクトする

### Requirement 2: カンバンボードの表示と管理
**Objective:** ユーザーとして、複数のステータス列からなるカンバンボードを表示・管理したい。そうすることで、タスクの進捗状況を一目で把握できるようにする。

#### Acceptance Criteria

1. WHEN 認証済みユーザーがカンバンボード画面にアクセスする THEN カンバンToDoアプリ SHALL デフォルトで「未着手」「進行中」「完了」の3つの列を持つカンバンボードを表示する
2. WHERE カンバンボード画面 THE カンバンToDoアプリ SHALL 各列に属するタスクカードを縦に並べて表示する
3. WHEN ユーザーが「新しい列を追加」ボタンをクリックする THEN カンバンToDoアプリ SHALL 列名入力フォームを表示し、入力後に新しい列を作成する
4. WHEN ユーザーが列のヘッダーにある編集アイコンをクリックする THEN カンバンToDoアプリ SHALL 列名を編集可能にし、変更を保存できるようにする
5. WHEN ユーザーが列のヘッダーにある削除アイコンをクリックする THEN カンバンToDoアプリ SHALL 確認ダイアログを表示し、確認後に列とその列内の全タスクを削除する
6. WHILE ユーザーがカンバンボード画面を表示している THE カンバンToDoアプリ SHALL Supabaseのリアルタイムサブスクリプションを通じて、他のセッションやユーザーによる変更を自動的に反映する

### Requirement 3: タスクの作成と編集
**Objective:** ユーザーとして、タスクを作成・編集し、必要な情報を記録したい。そうすることで、タスクの詳細を管理し、作業内容を明確にする。

#### Acceptance Criteria

1. WHEN ユーザーが列内の「+タスクを追加」ボタンをクリックする THEN カンバンToDoアプリ SHALL タスク作成フォームを表示する
2. WHEN ユーザーがタスク作成フォームでタイトルを入力し保存する THEN カンバンToDoアプリ SHALL 新しいタスクカードをその列に追加し、Supabaseデータベースに保存する
3. WHERE タスクカード THE カンバンToDoアプリ SHALL タイトル、説明、作成日時、優先度を表示する
4. WHEN ユーザーがタスクカードをクリックする THEN カンバンToDoアプリ SHALL タスク詳細モーダルを開き、全ての情報を表示・編集可能にする
5. WHEN ユーザーがタスク詳細モーダルで情報を変更し保存する THEN カンバンToDoアプリ SHALL 変更をSupabaseデータベースに保存し、カンバンボード上の表示を更新する
6. WHEN ユーザーがタスク詳細モーダルで削除ボタンをクリックする THEN カンバンToDoアプリ SHALL 確認ダイアログを表示し、確認後にタスクをSupabaseデータベースから削除する

### Requirement 4: ドラッグ&ドロップによるタスク移動
**Objective:** ユーザーとして、タスクをドラッグ&ドロップで列間または列内で移動したい。そうすることで、タスクのステータス変更や優先順位の調整を直感的に行えるようにする。

#### Acceptance Criteria

1. WHEN ユーザーがタスクカードをドラッグし始める THEN カンバンToDoアプリ SHALL タスクカードに視覚的なフィードバック(半透明化など)を適用する
2. WHEN ユーザーがタスクカードを別の列の上でドロップする THEN カンバンToDoアプリ SHALL タスクを新しい列に移動し、Supabaseデータベースのステータスを更新する
3. WHEN ユーザーがタスクカードを同じ列内の異なる位置にドロップする THEN カンバンToDoアプリ SHALL タスクの表示順序を変更し、Supabaseデータベースの並び順を更新する
4. WHILE ユーザーがタスクカードをドラッグしている THE カンバンToDoアプリ SHALL ドロップ可能な領域を視覚的にハイライトする
5. IF ドラッグ&ドロップ操作中にエラーが発生する THEN カンバンToDoアプリ SHALL タスクを元の位置に戻し、エラーメッセージを表示する

### Requirement 5: タスクのフィルタリングと検索
**Objective:** ユーザーとして、タスクを検索・フィルタリングしたい。そうすることで、大量のタスクの中から必要な情報を素早く見つけられるようにする。

#### Acceptance Criteria

1. WHERE カンバンボード画面のヘッダー THE カンバンToDoアプリ SHALL 検索ボックスを表示する
2. WHEN ユーザーが検索ボックスにテキストを入力する THEN カンバンToDoアプリ SHALL タイトルまたは説明に入力テキストを含むタスクのみを表示する
3. WHEN ユーザーが優先度フィルターを選択する THEN カンバンToDoアプリ SHALL 選択された優先度のタスクのみを表示する
4. WHEN ユーザーが検索およびフィルター条件をクリアする THEN カンバンToDoアプリ SHALL 全てのタスクを再表示する

### Requirement 6: データの永続化とリアルタイム同期
**Objective:** ユーザーとして、タスクデータが永続的に保存され、複数デバイス間でリアルタイムに同期されることを期待する。そうすることで、データの損失を防ぎ、常に最新の状態を確認できるようにする。

#### Acceptance Criteria

1. WHEN ユーザーがタスクまたは列に変更を加える THEN カンバンToDoアプリ SHALL 即座にSupabaseデータベースに変更を保存する
2. IF データベースへの保存に失敗する THEN カンバンToDoアプリ SHALL エラーメッセージを表示し、ユーザーに再試行を促す
3. WHEN 別のセッションまたはデバイスでタスクデータが変更される THEN カンバンToDoアプリ SHALL Supabaseリアルタイムサブスクリプションを通じて変更を検知し、現在のセッションの表示を自動的に更新する
4. WHEN ユーザーがオフライン状態で操作を行う THEN カンバンToDoアプリ SHALL 接続が復旧した際にオフライン中の変更をSupabaseに同期する

### Requirement 7: レスポンシブデザインとユーザビリティ
**Objective:** ユーザーとして、デスクトップとモバイルデバイスの両方で快適にアプリケーションを使用したい。そうすることで、場所やデバイスを問わずタスク管理ができるようにする。

#### Acceptance Criteria

1. WHERE デスクトップブラウザ THE カンバンToDoアプリ SHALL 全ての列を横に並べて表示する
2. WHERE モバイルブラウザ(画面幅768px以下) THE カンバンToDoアプリ SHALL 列を縦にスタックし、スワイプで列を切り替えられるようにする
3. WHEN ユーザーが画面サイズを変更する THEN カンバンToDoアプリ SHALL レイアウトを自動的に調整する
4. WHERE タッチデバイス THE カンバンToDoアプリ SHALL タッチジェスチャーによるドラッグ&ドロップ操作をサポートする
5. WHEN ユーザーがアプリケーションを初めて使用する THEN カンバンToDoアプリ SHALL 簡単なチュートリアルまたはツールチップを表示し、主要機能の使い方を案内する
